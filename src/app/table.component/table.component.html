
<div class=" table-main ">
  <div class="page-header rtl col-12 d-flex justify-content-between align-items-center ">
  <!-- Left side (search + filter) -->
  <div class="header-left">
    <div class="search-box">
      <i class="bi bi-search"></i>
      <input type="text" placeholder="بحث" />
      <span class="shortcut">K</span>
    </div>

<div class="dropdown">
  <button
    class="btn filter-btn dropdown-toggle"
    type="button"
    data-bs-toggle="dropdown"
  >
    <i class="bi bi-sliders"></i>
    التصفية
  </button>

  <ul class="dropdown-menu dropdown-menu-end">
    <li>
      <button class="dropdown-item" (click)="filterByStatus('all')">
        الكل
      </button>
    </li>
    <li>
      <button class="dropdown-item" (click)="filterByStatus('accepted')">
        مقبول
      </button>
    </li>
    <li>
      <button class="dropdown-item" (click)="filterByStatus('rejected')">
        مرفوض
      </button>
    </li>
    <li>
      <button class="dropdown-item" (click)="filterByStatus('processing')">
        قيد المعالجة
      </button>
    </li>
  </ul>
</div>


  </div>

  <!-- Right side (title + icons) -->
  <div class="header-right">
    <div class="header-icons">
      <i class="bi bi-arrows-fullscreen"></i>
      <i class="bi bi-layers"></i>
    </div>
    <h5 class="title">أعمالي</h5>
  </div>
</div>


<div class="table-responsive ">
  <table class="table custom-table align-middle">
    
    <thead>
  <tr>
    <th>
      <input type="checkbox" (change)="toggleAll($event)" />
    </th>
    <th>رقم المعاملة</th>
    <th>البيان</th>
    <th>عدد المنتجات</th>
    <th>عدد الملاحظات</th>
    <th>حالة الطلب</th>
    <th>منشئ الطلب</th>
    <th>تاريخ</th>
    <th></th>
  </tr>
</thead>

   <tbody>
  <tr
    *ngFor="let row of filteredData"
    [class.selected]="row.selected"
    (click)="selectRow(row)"
  >
    <!-- Checkbox -->
    <td (click)="$event.stopPropagation()">
      <input
        type="checkbox"
        [checked]="row.selected"
        (change)="row.selected = $any($event.target).checked"
      />
    </td>

    <td class="text-primary fw-semibold">{{ row.ref }}</td>
    <td>{{ row.title }}</td>
    <td>{{ row.products }}</td>
    <td>
      <i class="bi bi-chat-left-text"></i>
      {{ row.notes }}
    </td>

    <td>
      <span class="badge" [ngClass]="row.statusClass">
        {{ row.status }}
      </span>
    </td>

    <td>
      <div class="user">
        <div class="avatar">
          <i class="bi bi-person"></i>
        </div>
        <div>
          <div class="fw-semibold">{{ row.user }}</div>
          <small class="text-muted">{{ row.email }}</small>
        </div>
      </div>
    </td>

    <td>{{ row.date }}</td>

    <td class="text-end" (click)="$event.stopPropagation()">
      <div class="action-toolbar">
        <button class="icon-btn"><i class="bi bi-eye"></i></button>
        <button class="icon-btn"><i class="bi bi-x-circle"></i></button>
        <button class="icon-btn"><i class="bi bi-arrow-counterclockwise"></i></button>
        <button class="icon-btn active"><i class="bi bi-check-circle"></i></button>
      </div>
    </td>

    <td class="actions">⋮</td>
  </tr>
</tbody>

  </table>
</div>

</div>

