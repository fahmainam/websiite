<div class="main p-4 ">

  <!-- Tabs -->
  <ul class="nav nav-tabs gap-1 mb-3 mr-0 " role="tablist">
    @for (tab of tabs(); track tab.id) {
      <li class="nav-item tab-animate">
        <button
          class="nav-link d-flex align-items-center gap-2"
          [class.active]="activeTabId() === tab.id"
          (click)="setActiveTab(tab.id)"
          type="button">

          {{ tab.title }}

          @if (tab.closable) {
            <i
              class="bi bi-x-lg close-btn"
              (click)="requestCloseTab($event, tab)">
            </i>
          }
        </button>
      </li>
    }

    <li class="nav-item">
      <button class="nav-link text-success fw-bold" (click)="addNewTab()">
        <i class="bi bi-plus-lg"></i>
      </button>
    </li>
  </ul>

  <!-- Content -->
  <div class="tab-content  ">
    @for (tab of tabs(); track tab.id) {
      <div
        class="tab-pane fade"
        [class.show]="activeTabId() === tab.id"
        [class.active]="activeTabId() === tab.id">

        @if (tab.content === 'home-content') {
          <div class="row g-4">
            <div class="col-12">
              <app-stats-card
                [statsCards]="statsCards">
              </app-stats-card>
            </div>
          </div>
        }

        @else {
          <div class="p-5 text-center  rounded ">
            <h4>محتوى {{ tab.title }}</h4>
            <p>هذه مساحة فارغة</p>
          </div>
        }

      </div>
    }
  </div>

  <!-- Confirmation Modal -->
  @if (tabToDelete()) {
    <div class="modal-backdrop fade show"></div>

    <div class="modal fade show d-block">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">

          <div class="modal-header">
            <h5 class="modal-title">تأكيد الحذف</h5>
            <button class="btn-close" (click)="cancelClose()"></button>
          </div>

          <div class="modal-body">
            هل أنت متأكد من حذف
            <strong>{{ tabToDelete()?.title }}</strong>؟
          </div>

          <div class="modal-footer">
            <button class="btn btn-secondary" (click)="cancelClose()">إلغاء</button>
            <button class="btn btn-danger" (click)="confirmClose()">حذف</button>
          </div>

        </div>
      </div>
    </div>
  }
</div>
